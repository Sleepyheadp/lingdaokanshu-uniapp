(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ecology/index"],{"05f5":function(t,e,n){"use strict";n.r(e);var a=n("4011"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},4011:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("b413"),o=s(n("c8ae")),i=n("bad0");function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){Promise.all([n.e("common/vendor"),n.e("pages/ecology/ecology-construction")]).then(function(){return resolve(n("3505"))}.bind(null,n)).catch(n.oe)},u=function(){Promise.all([n.e("common/vendor"),n.e("pages/ecology/energy-conservation")]).then(function(){return resolve(n("54a1"))}.bind(null,n)).catch(n.oe)},r=function(){Promise.all([n.e("common/vendor"),n.e("pages/ecology/environmental-quality")]).then(function(){return resolve(n("5fad"))}.bind(null,n)).catch(n.oe)},l=function(){Promise.all([n.e("common/vendor"),n.e("pages/ecology/infrastructure")]).then(function(){return resolve(n("014d"))}.bind(null,n)).catch(n.oe)},f={name:"index",components:{ecologyConstruction:c,energyConservation:u,environmentalQuality:r,infrastructure:l},data:function(){return{hasSecondTab:!1,tabOffset:[],tabListShow:[],tabRowShow:"",tabActiveIndex:"",subTabList:[],subTabActiveIndex:"",tabData:{},testData:{},loadDataFinish:!1,subIndexOffset:[],tabListText:[{text:"环境质量",value:0},{text:"生态建设",value:1},{text:"节能减排",value:2},{text:"基础设施建设",value:3}]}},mounted:function(){this.initDOM(),this.changeShow(0),window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{initDOM:function(){document.getElementById("top").scrollIntoView(!0),this.tabRowShow=0,this.sliceObject(this.tabListText,0,3)},changeTab:function(t){var e=this;this.tabActiveIndex=t,this.subTabList=[];var n={name:this.tabListText[t].text};(0,a.getDataByTabName)(n,(function(n){n.data?(e.tabData=n.data,console.log("testData:",n.data),e.judgeHasSubTab(e.tabData.data),e.setSubTabOffset(t)):(0,o.default)({type:"danger",message:"获取数据错误"})}),(function(t){(0,o.default)({type:"danger",message:"服务器错误"+t})})),(0,i.windowScrollByOffset)(this.tabOffset[t])},judgeHasSubTab:function(t){var e=this;t.length>1?(this.hasSecondTab=!0,t.forEach((function(t){e.subTabList.push(t.name)}))):this.hasSecondTab=!1},changeShow:function(t){document.getElementById("top").scrollIntoView(!0),this.tabListShow=[],this.subTabActiveIndex=0,t>3?(this.tabRowShow=1,this.sliceObject(this.tabListText,4,this.tabListText.length-1)):(this.tabRowShow=0,this.sliceObject(this.tabListText,0,3)),this.changeTab(t)},sliceObject:function(t,e,n){var a=this;t.forEach((function(t,o){o>=e&&o<=n&&a.tabListShow.push(t.text)}))},setSubTabOffset:function(t){var e=this;!0===this.hasSecondTab&&(this.subIndexOffset[t]=[],this.subTabList.forEach((function(n,a){var o=(0,i.switchNumToDom)(a);setTimeout((function(){var n=document.getElementById(o),a=n.offsetTop;e.subIndexOffset[t].push(a)}),500)})))},changeSubTab:function(t){this.subTabActiveIndex=t,0===t&&(this.subTabActiveIndex=t,document.getElementById("top").scrollIntoView(!0)),1===t&&(0,i.windowScroll)("secondTab"),2===t&&(0,i.windowScroll)("thirdTab")},handleScroll:function(){if(!0===this.hasSecondTab)for(var t=window.pageYOffset,e=this.tabActiveIndex,n=this.subIndexOffset[e],a=n.length,o=0;o<a;o++)t>n[o]-(0,i.remToPx)(3)&&(this.subTabActiveIndex=o)}}};e.default=f},8904:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement;t._self._c},i=[]},a3e8:function(t,e,n){"use strict";var a=n("b649"),o=n.n(a);o.a},b278:function(t,e,n){"use strict";(function(t){n("3405");a(n("66fd"));var e=a(n("d820"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},b649:function(t,e,n){},d820:function(t,e,n){"use strict";n.r(e);var a=n("8904"),o=n("05f5");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("a3e8");var s,c=n("f0c5"),u=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"c4f50d52",null,!1,a["a"],s);e["default"]=u.exports}},[["b278","common/runtime","common/vendor"]]]);